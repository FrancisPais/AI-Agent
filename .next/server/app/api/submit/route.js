/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/submit/route";
exports.ids = ["app/api/submit/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/bullmq/dist/esm/classes lazy recursive referencedExports: default":
/*!************************************************************************************************!*\
  !*** ./node_modules/bullmq/dist/esm/classes/ lazy referencedExports: default namespace object ***!
  \************************************************************************************************/
/***/ ((module) => {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(() => {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = () => ([]);
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "(rsc)/./node_modules/bullmq/dist/esm/classes lazy recursive referencedExports: default";
module.exports = webpackEmptyAsyncContext;

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubmit%2Froute&page=%2Fapi%2Fsubmit%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubmit%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubmit%2Froute&page=%2Fapi%2Fsubmit%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubmit%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_app_api_submit_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/submit/route.ts */ \"(rsc)/./app/api/submit/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/submit/route\",\n        pathname: \"/api/submit\",\n        filename: \"route\",\n        bundlePath: \"app/api/submit/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/app/api/submit/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_app_api_submit_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/submit/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdWJtaXQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN1Ym1pdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN1Ym1pdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNGO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veXQtc2hvcnRzbWl0aC8/NDM4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FwcC9hcGkvc3VibWl0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdWJtaXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdWJtaXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N1Ym1pdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvYXBwL2FwaS9zdWJtaXQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3N1Ym1pdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubmit%2Froute&page=%2Fapi%2Fsubmit%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubmit%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/submit/route.ts":
/*!*********************************!*\
  !*** ./app/api/submit/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _src_lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _src_lib_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/lib/queue */ \"(rsc)/./src/lib/queue.ts\");\n/* harmony import */ var _src_services_youtube__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/services/youtube */ \"(rsc)/./src/services/youtube.ts\");\n/* harmony import */ var _src_lib_session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/lib/session */ \"(rsc)/./src/lib/session.ts\");\n\n\n\n\n\nfunction sanitizeUrl(url) {\n    const trimmed = url.trim();\n    const urlPattern = /^(https?:\\/\\/)?(www\\.)?(youtube\\.com|youtu\\.be)\\/.+$/i;\n    if (!urlPattern.test(trimmed)) {\n        throw new Error(\"Invalid YouTube URL\");\n    }\n    return trimmed;\n}\nasync function POST(request) {\n    try {\n        const session = await (0,_src_lib_session__WEBPACK_IMPORTED_MODULE_4__.requireAuth)();\n        if (!session.userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User ID not found in session\"\n            }, {\n                status: 401\n            });\n        }\n        const user = await _src_lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n            where: {\n                id: session.userId\n            },\n            select: {\n                youtubeCookies: true\n            }\n        });\n        if (!user || !user.youtubeCookies) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"YouTube cookies not configured. Please upload your YouTube cookies first.\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { url } = body;\n        if (!url) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"URL is required\"\n            }, {\n                status: 400\n            });\n        }\n        const sanitizedUrl = sanitizeUrl(url);\n        const metadata = await (0,_src_services_youtube__WEBPACK_IMPORTED_MODULE_3__.getVideoMetadata)(sanitizedUrl, session.userId);\n        const video = await _src_lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.video.create({\n            data: {\n                userId: session.userId,\n                sourceUrl: sanitizedUrl,\n                title: metadata.title,\n                durationSec: metadata.duration,\n                status: \"queued\"\n            }\n        });\n        await _src_lib_queue__WEBPACK_IMPORTED_MODULE_2__.videoQueue.add(\"process\", {\n            videoId: video.id,\n            userId: session.userId\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            videoId: video.id,\n            status: \"queued\"\n        });\n    } catch (error) {\n        console.error(\"Error submitting video:\", error);\n        if (error.message === \"Authentication required\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        if (error.message === \"Invalid YouTube URL\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid YouTube URL\"\n            }, {\n                status: 400\n            });\n        }\n        if (error.message.includes(\"YouTube cookies\")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 401\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to submit video\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3N1Ym1pdC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUQ7QUFDZDtBQUNHO0FBQ2E7QUFDVjtBQUUvQyxTQUFTSyxZQUFZQyxHQUFXO0lBQzlCLE1BQU1DLFVBQVVELElBQUlFLElBQUk7SUFDeEIsTUFBTUMsYUFBYTtJQUVuQixJQUFJLENBQUNBLFdBQVdDLElBQUksQ0FBQ0gsVUFDckI7UUFDRSxNQUFNLElBQUlJLE1BQU07SUFDbEI7SUFFQSxPQUFPSjtBQUNUO0FBRU8sZUFBZUssS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTVYsNkRBQVdBO1FBRWpDLElBQUksQ0FBQ1UsUUFBUUMsTUFBTSxFQUNuQjtZQUNFLE9BQU9mLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUErQixHQUN4QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTUMsT0FBTyxNQUFNbEIsbURBQU1BLENBQUNrQixJQUFJLENBQUNDLFVBQVUsQ0FBQztZQUN4Q0MsT0FBTztnQkFBRUMsSUFBSVIsUUFBUUMsTUFBTTtZQUFDO1lBQzVCUSxRQUFRO2dCQUFFQyxnQkFBZ0I7WUFBSztRQUNqQztRQUVBLElBQUksQ0FBQ0wsUUFBUSxDQUFDQSxLQUFLSyxjQUFjLEVBQ2pDO1lBQ0UsT0FBT3hCLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUE0RSxHQUNyRjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTU8sT0FBTyxNQUFNWixRQUFRRyxJQUFJO1FBQy9CLE1BQU0sRUFBRVYsR0FBRyxFQUFFLEdBQUdtQjtRQUVoQixJQUFJLENBQUNuQixLQUNMO1lBQ0UsT0FBT04scURBQVlBLENBQUNnQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWtCLEdBQzNCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNUSxlQUFlckIsWUFBWUM7UUFFakMsTUFBTXFCLFdBQVcsTUFBTXhCLHVFQUFnQkEsQ0FBQ3VCLGNBQWNaLFFBQVFDLE1BQU07UUFFcEUsTUFBTWEsUUFBUSxNQUFNM0IsbURBQU1BLENBQUMyQixLQUFLLENBQUNDLE1BQU0sQ0FBQztZQUN0Q0MsTUFBTTtnQkFDSmYsUUFBUUQsUUFBUUMsTUFBTTtnQkFDdEJnQixXQUFXTDtnQkFDWE0sT0FBT0wsU0FBU0ssS0FBSztnQkFDckJDLGFBQWFOLFNBQVNPLFFBQVE7Z0JBQzlCaEIsUUFBUTtZQUNWO1FBQ0Y7UUFFQSxNQUFNaEIsc0RBQVVBLENBQUNpQyxHQUFHLENBQUMsV0FBVztZQUM5QkMsU0FBU1IsTUFBTU4sRUFBRTtZQUNqQlAsUUFBUUQsUUFBUUMsTUFBTTtRQUN4QjtRQUVBLE9BQU9mLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUFDO1lBQ3ZCb0IsU0FBU1IsTUFBTU4sRUFBRTtZQUNqQkosUUFBUTtRQUNWO0lBQ0YsRUFDQSxPQUFPRCxPQUFZO1FBQ2pCb0IsUUFBUXBCLEtBQUssQ0FBQywyQkFBMkJBO1FBRXpDLElBQUlBLE1BQU1xQixPQUFPLEtBQUssMkJBQ3RCO1lBQ0UsT0FBT3RDLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUEwQixHQUNuQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsSUFBSUQsTUFBTXFCLE9BQU8sS0FBSyx1QkFDdEI7WUFDRSxPQUFPdEMscURBQVlBLENBQUNnQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXNCLEdBQy9CO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxJQUFJRCxNQUFNcUIsT0FBTyxDQUFDQyxRQUFRLENBQUMsb0JBQzNCO1lBQ0UsT0FBT3ZDLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtnQkFBRUMsT0FBT0EsTUFBTXFCLE9BQU87WUFBQyxHQUN2QjtnQkFBRXBCLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE9BQU9sQixxREFBWUEsQ0FBQ2dCLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUF5QixHQUNsQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3l0LXNob3J0c21pdGgvLi9hcHAvYXBpL3N1Ym1pdC9yb3V0ZS50cz82YmUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0Avc3JjL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyB2aWRlb1F1ZXVlIH0gZnJvbSAnQC9zcmMvbGliL3F1ZXVlJ1xuaW1wb3J0IHsgZ2V0VmlkZW9NZXRhZGF0YSB9IGZyb20gJ0Avc3JjL3NlcnZpY2VzL3lvdXR1YmUnXG5pbXBvcnQgeyByZXF1aXJlQXV0aCB9IGZyb20gJ0Avc3JjL2xpYi9zZXNzaW9uJ1xuXG5mdW5jdGlvbiBzYW5pdGl6ZVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHRyaW1tZWQgPSB1cmwudHJpbSgpXG4gIGNvbnN0IHVybFBhdHRlcm4gPSAvXihodHRwcz86XFwvXFwvKT8od3d3XFwuKT8oeW91dHViZVxcLmNvbXx5b3V0dVxcLmJlKVxcLy4rJC9pXG4gIFxuICBpZiAoIXVybFBhdHRlcm4udGVzdCh0cmltbWVkKSlcbiAge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBZb3VUdWJlIFVSTCcpXG4gIH1cbiAgXG4gIHJldHVybiB0cmltbWVkXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHJlcXVpcmVBdXRoKClcbiAgICBcbiAgICBpZiAoIXNlc3Npb24udXNlcklkKVxuICAgIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1VzZXIgSUQgbm90IGZvdW5kIGluIHNlc3Npb24nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKVxuICAgIH1cbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogc2Vzc2lvbi51c2VySWQgfSxcbiAgICAgIHNlbGVjdDogeyB5b3V0dWJlQ29va2llczogdHJ1ZSB9XG4gICAgfSlcbiAgICBcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIueW91dHViZUNvb2tpZXMpXG4gICAge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnWW91VHViZSBjb29raWVzIG5vdCBjb25maWd1cmVkLiBQbGVhc2UgdXBsb2FkIHlvdXIgWW91VHViZSBjb29raWVzIGZpcnN0LicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgdXJsIH0gPSBib2R5XG4gICAgXG4gICAgaWYgKCF1cmwpXG4gICAge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnVVJMIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc2FuaXRpemVkVXJsID0gc2FuaXRpemVVcmwodXJsKVxuICAgIFxuICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgZ2V0VmlkZW9NZXRhZGF0YShzYW5pdGl6ZWRVcmwsIHNlc3Npb24udXNlcklkKVxuICAgIFxuICAgIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJJZDogc2Vzc2lvbi51c2VySWQsXG4gICAgICAgIHNvdXJjZVVybDogc2FuaXRpemVkVXJsLFxuICAgICAgICB0aXRsZTogbWV0YWRhdGEudGl0bGUsXG4gICAgICAgIGR1cmF0aW9uU2VjOiBtZXRhZGF0YS5kdXJhdGlvbixcbiAgICAgICAgc3RhdHVzOiAncXVldWVkJ1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgYXdhaXQgdmlkZW9RdWV1ZS5hZGQoJ3Byb2Nlc3MnLCB7XG4gICAgICB2aWRlb0lkOiB2aWRlby5pZCxcbiAgICAgIHVzZXJJZDogc2Vzc2lvbi51c2VySWRcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICB2aWRlb0lkOiB2aWRlby5pZCxcbiAgICAgIHN0YXR1czogJ3F1ZXVlZCdcbiAgICB9KVxuICB9XG4gIGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3VibWl0dGluZyB2aWRlbzonLCBlcnJvcilcbiAgICBcbiAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJylcbiAgICB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIGlmIChlcnJvci5tZXNzYWdlID09PSAnSW52YWxpZCBZb3VUdWJlIFVSTCcpXG4gICAge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBZb3VUdWJlIFVSTCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdZb3VUdWJlIGNvb2tpZXMnKSlcbiAgICB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gc3VibWl0IHZpZGVvJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwidmlkZW9RdWV1ZSIsImdldFZpZGVvTWV0YWRhdGEiLCJyZXF1aXJlQXV0aCIsInNhbml0aXplVXJsIiwidXJsIiwidHJpbW1lZCIsInRyaW0iLCJ1cmxQYXR0ZXJuIiwidGVzdCIsIkVycm9yIiwiUE9TVCIsInJlcXVlc3QiLCJzZXNzaW9uIiwidXNlcklkIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0IiwieW91dHViZUNvb2tpZXMiLCJib2R5Iiwic2FuaXRpemVkVXJsIiwibWV0YWRhdGEiLCJ2aWRlbyIsImNyZWF0ZSIsImRhdGEiLCJzb3VyY2VVcmwiLCJ0aXRsZSIsImR1cmF0aW9uU2VjIiwiZHVyYXRpb24iLCJhZGQiLCJ2aWRlb0lkIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/submit/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/encryption.ts":
/*!*******************************!*\
  !*** ./src/lib/encryption.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   encrypt: () => (/* binding */ encrypt)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst ALGORITHM = \"aes-256-gcm\";\nconst KEY_LENGTH = 32;\nconst IV_LENGTH = 16;\nconst SALT_LENGTH = 16;\nconst TAG_LENGTH = 16;\nfunction getKey(salt) {\n    const secret = process.env.SESSION_SECRET || \"complex_password_at_least_32_characters_long_for_session_security\";\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_0__.scryptSync)(secret, salt, KEY_LENGTH);\n}\nfunction encrypt(text) {\n    const salt = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(SALT_LENGTH);\n    const iv = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(IV_LENGTH);\n    const key = getKey(salt);\n    const cipher = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createCipheriv)(ALGORITHM, key, iv);\n    const encrypted = Buffer.concat([\n        cipher.update(text, \"utf8\"),\n        cipher.final()\n    ]);\n    const tag = cipher.getAuthTag();\n    const result = Buffer.concat([\n        salt,\n        iv,\n        tag,\n        encrypted\n    ]);\n    return result.toString(\"base64\");\n}\nfunction decrypt(encryptedText) {\n    const buffer = Buffer.from(encryptedText, \"base64\");\n    const salt = buffer.subarray(0, SALT_LENGTH);\n    const iv = buffer.subarray(SALT_LENGTH, SALT_LENGTH + IV_LENGTH);\n    const tag = buffer.subarray(SALT_LENGTH + IV_LENGTH, SALT_LENGTH + IV_LENGTH + TAG_LENGTH);\n    const encrypted = buffer.subarray(SALT_LENGTH + IV_LENGTH + TAG_LENGTH);\n    const key = getKey(salt);\n    const decipher = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createDecipheriv)(ALGORITHM, key, iv);\n    decipher.setAuthTag(tag);\n    const decrypted = Buffer.concat([\n        decipher.update(encrypted),\n        decipher.final()\n    ]);\n    return decrypted.toString(\"utf8\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2VuY3J5cHRpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrRjtBQUVsRixNQUFNSSxZQUFZO0FBQ2xCLE1BQU1DLGFBQWE7QUFDbkIsTUFBTUMsWUFBWTtBQUNsQixNQUFNQyxjQUFjO0FBQ3BCLE1BQU1DLGFBQWE7QUFFbkIsU0FBU0MsT0FBT0MsSUFBWTtJQUMxQixNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSTtJQUM3QyxPQUFPWCxrREFBVUEsQ0FBQ1EsUUFBUUQsTUFBTUw7QUFDbEM7QUFFTyxTQUFTVSxRQUFRQyxJQUFZO0lBQ2xDLE1BQU1OLE9BQU9SLG1EQUFXQSxDQUFDSztJQUN6QixNQUFNVSxLQUFLZixtREFBV0EsQ0FBQ0k7SUFDdkIsTUFBTVksTUFBTVQsT0FBT0M7SUFFbkIsTUFBTVMsU0FBU25CLHNEQUFjQSxDQUFDSSxXQUFXYyxLQUFLRDtJQUU5QyxNQUFNRyxZQUFZQyxPQUFPQyxNQUFNLENBQUM7UUFDOUJILE9BQU9JLE1BQU0sQ0FBQ1AsTUFBTTtRQUNwQkcsT0FBT0ssS0FBSztLQUNiO0lBRUQsTUFBTUMsTUFBTU4sT0FBT08sVUFBVTtJQUU3QixNQUFNQyxTQUFTTixPQUFPQyxNQUFNLENBQUM7UUFBQ1o7UUFBTU87UUFBSVE7UUFBS0w7S0FBVTtJQUN2RCxPQUFPTyxPQUFPQyxRQUFRLENBQUM7QUFDekI7QUFFTyxTQUFTQyxRQUFRQyxhQUFxQjtJQUMzQyxNQUFNQyxTQUFTVixPQUFPVyxJQUFJLENBQUNGLGVBQWU7SUFFMUMsTUFBTXBCLE9BQU9xQixPQUFPRSxRQUFRLENBQUMsR0FBRzFCO0lBQ2hDLE1BQU1VLEtBQUtjLE9BQU9FLFFBQVEsQ0FBQzFCLGFBQWFBLGNBQWNEO0lBQ3RELE1BQU1tQixNQUFNTSxPQUFPRSxRQUFRLENBQUMxQixjQUFjRCxXQUFXQyxjQUFjRCxZQUFZRTtJQUMvRSxNQUFNWSxZQUFZVyxPQUFPRSxRQUFRLENBQUMxQixjQUFjRCxZQUFZRTtJQUU1RCxNQUFNVSxNQUFNVCxPQUFPQztJQUVuQixNQUFNd0IsV0FBV2pDLHdEQUFnQkEsQ0FBQ0csV0FBV2MsS0FBS0Q7SUFDbERpQixTQUFTQyxVQUFVLENBQUNWO0lBRXBCLE1BQU1XLFlBQVlmLE9BQU9DLE1BQU0sQ0FBQztRQUM5QlksU0FBU1gsTUFBTSxDQUFDSDtRQUNoQmMsU0FBU1YsS0FBSztLQUNmO0lBRUQsT0FBT1ksVUFBVVIsUUFBUSxDQUFDO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veXQtc2hvcnRzbWl0aC8uL3NyYy9saWIvZW5jcnlwdGlvbi50cz80OTFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNpcGhlcml2LCBjcmVhdGVEZWNpcGhlcml2LCByYW5kb21CeXRlcywgc2NyeXB0U3luYyB9IGZyb20gJ2NyeXB0bydcblxuY29uc3QgQUxHT1JJVEhNID0gJ2Flcy0yNTYtZ2NtJ1xuY29uc3QgS0VZX0xFTkdUSCA9IDMyXG5jb25zdCBJVl9MRU5HVEggPSAxNlxuY29uc3QgU0FMVF9MRU5HVEggPSAxNlxuY29uc3QgVEFHX0xFTkdUSCA9IDE2XG5cbmZ1bmN0aW9uIGdldEtleShzYWx0OiBCdWZmZXIpOiBCdWZmZXIge1xuICBjb25zdCBzZWNyZXQgPSBwcm9jZXNzLmVudi5TRVNTSU9OX1NFQ1JFVCB8fCAnY29tcGxleF9wYXNzd29yZF9hdF9sZWFzdF8zMl9jaGFyYWN0ZXJzX2xvbmdfZm9yX3Nlc3Npb25fc2VjdXJpdHknXG4gIHJldHVybiBzY3J5cHRTeW5jKHNlY3JldCwgc2FsdCwgS0VZX0xFTkdUSClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc2FsdCA9IHJhbmRvbUJ5dGVzKFNBTFRfTEVOR1RIKVxuICBjb25zdCBpdiA9IHJhbmRvbUJ5dGVzKElWX0xFTkdUSClcbiAgY29uc3Qga2V5ID0gZ2V0S2V5KHNhbHQpXG4gIFxuICBjb25zdCBjaXBoZXIgPSBjcmVhdGVDaXBoZXJpdihBTEdPUklUSE0sIGtleSwgaXYpXG4gIFxuICBjb25zdCBlbmNyeXB0ZWQgPSBCdWZmZXIuY29uY2F0KFtcbiAgICBjaXBoZXIudXBkYXRlKHRleHQsICd1dGY4JyksXG4gICAgY2lwaGVyLmZpbmFsKClcbiAgXSlcbiAgXG4gIGNvbnN0IHRhZyA9IGNpcGhlci5nZXRBdXRoVGFnKClcbiAgXG4gIGNvbnN0IHJlc3VsdCA9IEJ1ZmZlci5jb25jYXQoW3NhbHQsIGl2LCB0YWcsIGVuY3J5cHRlZF0pXG4gIHJldHVybiByZXN1bHQudG9TdHJpbmcoJ2Jhc2U2NCcpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNyeXB0KGVuY3J5cHRlZFRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGVuY3J5cHRlZFRleHQsICdiYXNlNjQnKVxuICBcbiAgY29uc3Qgc2FsdCA9IGJ1ZmZlci5zdWJhcnJheSgwLCBTQUxUX0xFTkdUSClcbiAgY29uc3QgaXYgPSBidWZmZXIuc3ViYXJyYXkoU0FMVF9MRU5HVEgsIFNBTFRfTEVOR1RIICsgSVZfTEVOR1RIKVxuICBjb25zdCB0YWcgPSBidWZmZXIuc3ViYXJyYXkoU0FMVF9MRU5HVEggKyBJVl9MRU5HVEgsIFNBTFRfTEVOR1RIICsgSVZfTEVOR1RIICsgVEFHX0xFTkdUSClcbiAgY29uc3QgZW5jcnlwdGVkID0gYnVmZmVyLnN1YmFycmF5KFNBTFRfTEVOR1RIICsgSVZfTEVOR1RIICsgVEFHX0xFTkdUSClcbiAgXG4gIGNvbnN0IGtleSA9IGdldEtleShzYWx0KVxuICBcbiAgY29uc3QgZGVjaXBoZXIgPSBjcmVhdGVEZWNpcGhlcml2KEFMR09SSVRITSwga2V5LCBpdilcbiAgZGVjaXBoZXIuc2V0QXV0aFRhZyh0YWcpXG4gIFxuICBjb25zdCBkZWNyeXB0ZWQgPSBCdWZmZXIuY29uY2F0KFtcbiAgICBkZWNpcGhlci51cGRhdGUoZW5jcnlwdGVkKSxcbiAgICBkZWNpcGhlci5maW5hbCgpXG4gIF0pXG4gIFxuICByZXR1cm4gZGVjcnlwdGVkLnRvU3RyaW5nKCd1dGY4Jylcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDaXBoZXJpdiIsImNyZWF0ZURlY2lwaGVyaXYiLCJyYW5kb21CeXRlcyIsInNjcnlwdFN5bmMiLCJBTEdPUklUSE0iLCJLRVlfTEVOR1RIIiwiSVZfTEVOR1RIIiwiU0FMVF9MRU5HVEgiLCJUQUdfTEVOR1RIIiwiZ2V0S2V5Iiwic2FsdCIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJTRVNTSU9OX1NFQ1JFVCIsImVuY3J5cHQiLCJ0ZXh0IiwiaXYiLCJrZXkiLCJjaXBoZXIiLCJlbmNyeXB0ZWQiLCJCdWZmZXIiLCJjb25jYXQiLCJ1cGRhdGUiLCJmaW5hbCIsInRhZyIsImdldEF1dGhUYWciLCJyZXN1bHQiLCJ0b1N0cmluZyIsImRlY3J5cHQiLCJlbmNyeXB0ZWRUZXh0IiwiYnVmZmVyIiwiZnJvbSIsInN1YmFycmF5IiwiZGVjaXBoZXIiLCJzZXRBdXRoVGFnIiwiZGVjcnlwdGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/encryption.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjO0lBQ3pDSCxnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95dC1zaG9ydHNtaXRoLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/queue.ts":
/*!**************************!*\
  !*** ./src/lib/queue.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connection: () => (/* binding */ connection),\n/* harmony export */   videoQueue: () => (/* binding */ videoQueue)\n/* harmony export */ });\n/* harmony import */ var bullmq__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bullmq */ \"(rsc)/./node_modules/bullmq/dist/esm/index.js\");\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ioredis */ \"(rsc)/./node_modules/ioredis/built/index.js\");\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ioredis__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst connection = new (ioredis__WEBPACK_IMPORTED_MODULE_1___default())(process.env.REDIS_URL || \"redis://localhost:6379\", {\n    maxRetriesPerRequest: null\n});\nconst queueOptions = {\n    connection\n};\nconst videoQueue = new bullmq__WEBPACK_IMPORTED_MODULE_0__.Queue(\"video.process\", queueOptions);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3F1ZXVlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTRDO0FBQ2Y7QUFFN0IsTUFBTUUsYUFBYSxJQUFJRCxnREFBT0EsQ0FBQ0UsUUFBUUMsR0FBRyxDQUFDQyxTQUFTLElBQUksMEJBQTBCO0lBQ2hGQyxzQkFBc0I7QUFDeEI7QUFFQSxNQUFNQyxlQUE2QjtJQUNqQ0w7QUFDRjtBQUVPLE1BQU1NLGFBQWEsSUFBSVIseUNBQUtBLENBQUMsaUJBQWlCTyxjQUFhO0FBRTdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veXQtc2hvcnRzbWl0aC8uL3NyYy9saWIvcXVldWUudHM/MDI1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBRdWV1ZSwgUXVldWVPcHRpb25zIH0gZnJvbSAnYnVsbG1xJ1xuaW1wb3J0IElPUmVkaXMgZnJvbSAnaW9yZWRpcydcblxuY29uc3QgY29ubmVjdGlvbiA9IG5ldyBJT1JlZGlzKHByb2Nlc3MuZW52LlJFRElTX1VSTCB8fCAncmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OScsIHtcbiAgbWF4UmV0cmllc1BlclJlcXVlc3Q6IG51bGxcbn0pXG5cbmNvbnN0IHF1ZXVlT3B0aW9uczogUXVldWVPcHRpb25zID0ge1xuICBjb25uZWN0aW9uXG59XG5cbmV4cG9ydCBjb25zdCB2aWRlb1F1ZXVlID0gbmV3IFF1ZXVlKCd2aWRlby5wcm9jZXNzJywgcXVldWVPcHRpb25zKVxuXG5leHBvcnQgeyBjb25uZWN0aW9uIH1cbiJdLCJuYW1lcyI6WyJRdWV1ZSIsIklPUmVkaXMiLCJjb25uZWN0aW9uIiwicHJvY2VzcyIsImVudiIsIlJFRElTX1VSTCIsIm1heFJldHJpZXNQZXJSZXF1ZXN0IiwicXVldWVPcHRpb25zIiwidmlkZW9RdWV1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/queue.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/session.ts":
/*!****************************!*\
  !*** ./src/lib/session.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth)\n/* harmony export */ });\n/* harmony import */ var iron_session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! iron-session */ \"(rsc)/./node_modules/iron-session/dist/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nasync function getSession() {\n    const sessionCookies = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    return (0,iron_session__WEBPACK_IMPORTED_MODULE_1__.getIronSession)(sessionCookies, {\n        password: process.env.SESSION_SECRET || \"complex_password_at_least_32_characters_long_for_session_security\",\n        cookieName: \"yt_shortsmith_session\",\n        cookieOptions: {\n            secure: \"development\" === \"production\",\n            httpOnly: true,\n            sameSite: \"lax\",\n            maxAge: 60 * 60 * 24 * 7,\n            path: \"/\"\n        }\n    });\n}\nasync function requireAuth() {\n    const session = await getSession();\n    if (!session.isAuthenticated) {\n        throw new Error(\"Authentication required\");\n    }\n    return session;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Nlc3Npb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QztBQUNQO0FBUS9CLGVBQWVFO0lBQ3BCLE1BQU1DLGlCQUFpQixNQUFNRixxREFBT0E7SUFFcEMsT0FBT0QsNERBQWNBLENBQWNHLGdCQUFnQjtRQUNqREMsVUFBVUMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLElBQUk7UUFDeENDLFlBQVk7UUFDWkMsZUFBZTtZQUNiQyxRQUFRTCxrQkFBeUI7WUFDakNNLFVBQVU7WUFDVkMsVUFBVTtZQUNWQyxRQUFRLEtBQUssS0FBSyxLQUFLO1lBQ3ZCQyxNQUFNO1FBQ1I7SUFDRjtBQUNGO0FBRU8sZUFBZUM7SUFDcEIsTUFBTUMsVUFBVSxNQUFNZDtJQUV0QixJQUFJLENBQUNjLFFBQVFDLGVBQWUsRUFDNUI7UUFDRSxNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFFQSxPQUFPRjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veXQtc2hvcnRzbWl0aC8uL3NyYy9saWIvc2Vzc2lvbi50cz84ZGY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldElyb25TZXNzaW9uIH0gZnJvbSAnaXJvbi1zZXNzaW9uJ1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uRGF0YSB7XG4gIGlzQXV0aGVudGljYXRlZDogYm9vbGVhblxuICB1c2VySWQ/OiBzdHJpbmdcbiAgZW1haWw/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb24oKSB7XG4gIGNvbnN0IHNlc3Npb25Db29raWVzID0gYXdhaXQgY29va2llcygpXG4gIFxuICByZXR1cm4gZ2V0SXJvblNlc3Npb248U2Vzc2lvbkRhdGE+KHNlc3Npb25Db29raWVzLCB7XG4gICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUIHx8ICdjb21wbGV4X3Bhc3N3b3JkX2F0X2xlYXN0XzMyX2NoYXJhY3RlcnNfbG9uZ19mb3Jfc2Vzc2lvbl9zZWN1cml0eScsXG4gICAgY29va2llTmFtZTogJ3l0X3Nob3J0c21pdGhfc2Vzc2lvbicsXG4gICAgY29va2llT3B0aW9uczoge1xuICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsXG4gICAgICBwYXRoOiAnLydcbiAgICB9XG4gIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlQXV0aCgpIHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKVxuICBcbiAgaWYgKCFzZXNzaW9uLmlzQXV0aGVudGljYXRlZClcbiAge1xuICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKVxuICB9XG4gIFxuICByZXR1cm4gc2Vzc2lvblxufVxuIl0sIm5hbWVzIjpbImdldElyb25TZXNzaW9uIiwiY29va2llcyIsImdldFNlc3Npb24iLCJzZXNzaW9uQ29va2llcyIsInBhc3N3b3JkIiwicHJvY2VzcyIsImVudiIsIlNFU1NJT05fU0VDUkVUIiwiY29va2llTmFtZSIsImNvb2tpZU9wdGlvbnMiLCJzZWN1cmUiLCJodHRwT25seSIsInNhbWVTaXRlIiwibWF4QWdlIiwicGF0aCIsInJlcXVpcmVBdXRoIiwic2Vzc2lvbiIsImlzQXV0aGVudGljYXRlZCIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/session.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/youtube.ts":
/*!*********************************!*\
  !*** ./src/services/youtube.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanupUserCookiesFile: () => (/* binding */ cleanupUserCookiesFile),\n/* harmony export */   createUserCookiesFile: () => (/* binding */ createUserCookiesFile),\n/* harmony export */   downloadVideo: () => (/* binding */ downloadVideo),\n/* harmony export */   getVideoMetadata: () => (/* binding */ getVideoMetadata)\n/* harmony export */ });\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! os */ \"os\");\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _src_lib_prisma__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _src_lib_encryption__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/src/lib/encryption */ \"(rsc)/./src/lib/encryption.ts\");\n\n\n\n\n\n\n\n\nconst execPromise = (0,util__WEBPACK_IMPORTED_MODULE_1__.promisify)(child_process__WEBPACK_IMPORTED_MODULE_0__.exec);\nasync function createUserCookiesFile(userId) {\n    const user = await _src_lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            youtubeCookies: true\n        }\n    });\n    if (!user || !user.youtubeCookies) {\n        return null;\n    }\n    const cookiesDir = (0,path__WEBPACK_IMPORTED_MODULE_3__.join)((0,os__WEBPACK_IMPORTED_MODULE_4__.tmpdir)(), \"yt-cookies\");\n    if (!(0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(cookiesDir)) {\n        (0,fs__WEBPACK_IMPORTED_MODULE_2__.mkdirSync)(cookiesDir, {\n            recursive: true\n        });\n    }\n    const cookiesPath = (0,path__WEBPACK_IMPORTED_MODULE_3__.join)(cookiesDir, `${userId}.txt`);\n    const decryptedCookies = (0,_src_lib_encryption__WEBPACK_IMPORTED_MODULE_6__.decrypt)(user.youtubeCookies);\n    (0,fs__WEBPACK_IMPORTED_MODULE_2__.writeFileSync)(cookiesPath, decryptedCookies);\n    (0,fs__WEBPACK_IMPORTED_MODULE_2__.chmodSync)(cookiesPath, 384);\n    await _src_lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.user.update({\n        where: {\n            id: userId\n        },\n        data: {\n            youtubeCookiesLastUsedAt: new Date()\n        }\n    });\n    return cookiesPath;\n}\nfunction cleanupUserCookiesFile(userId) {\n    const cookiesPath = (0,path__WEBPACK_IMPORTED_MODULE_3__.join)((0,os__WEBPACK_IMPORTED_MODULE_4__.tmpdir)(), \"yt-cookies\", `${userId}.txt`);\n    try {\n        if ((0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(cookiesPath)) {\n            (0,fs__WEBPACK_IMPORTED_MODULE_2__.unlinkSync)(cookiesPath);\n        }\n    } catch (error) {\n        console.error(\"Failed to cleanup cookies file:\", error);\n    }\n}\nasync function findYtDlp() {\n    if (process.env.YT_DLP_PATH && (0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(process.env.YT_DLP_PATH)) {\n        return process.env.YT_DLP_PATH;\n    }\n    try {\n        await execPromise(\"which yt-dlp\");\n        return \"yt-dlp\";\n    } catch  {\n        try {\n            await execPromise(\"which youtube-dl\");\n            return \"youtube-dl\";\n        } catch  {\n            throw new Error(\"yt-dlp or youtube-dl not found in PATH\");\n        }\n    }\n}\nasync function getVideoMetadata(url, userId) {\n    const ytDlp = await findYtDlp();\n    const cookiesPath = await createUserCookiesFile(userId);\n    if (!cookiesPath) {\n        throw new Error(\"YouTube cookies not configured. Please upload your YouTube cookies.\");\n    }\n    try {\n        const strategies = [\n            {\n                client: \"ios\",\n                skipAvailabilityCheck: false\n            },\n            {\n                client: \"android\",\n                skipAvailabilityCheck: false\n            },\n            {\n                client: \"web\",\n                skipAvailabilityCheck: true\n            },\n            {\n                client: \"mweb\",\n                skipAvailabilityCheck: true\n            }\n        ];\n        let lastError = null;\n        for (const strategy of strategies){\n            try {\n                let extractorArgs = `youtube:player_client=${strategy.client}`;\n                if (strategy.skipAvailabilityCheck) {\n                    extractorArgs += `;skip=authcheck`;\n                }\n                const args = [\n                    \"--dump-json\",\n                    \"--no-download\",\n                    \"--force-ipv4\",\n                    \"--sleep-requests\",\n                    \"1\",\n                    \"--extractor-args\",\n                    extractorArgs,\n                    \"--cookies\",\n                    cookiesPath,\n                    url\n                ];\n                const result = await new Promise((resolve, reject)=>{\n                    let stdout = \"\";\n                    let stderr = \"\";\n                    const process1 = (0,child_process__WEBPACK_IMPORTED_MODULE_0__.spawn)(ytDlp, args);\n                    process1.stdout.on(\"data\", (data)=>{\n                        stdout += data.toString();\n                    });\n                    process1.stderr.on(\"data\", (data)=>{\n                        stderr += data.toString();\n                    });\n                    process1.on(\"close\", (code)=>{\n                        if (code === 0) {\n                            resolve(stdout);\n                        } else {\n                            reject(new Error(`yt-dlp exited with code ${code}: ${stderr}`));\n                        }\n                    });\n                    process1.on(\"error\", reject);\n                });\n                const data = JSON.parse(result);\n                return {\n                    title: data.title,\n                    duration: Math.floor(data.duration),\n                    url: data.url\n                };\n            } catch (error) {\n                lastError = error;\n                continue;\n            }\n        }\n        throw lastError || new Error(\"Failed to fetch video metadata\");\n    } finally{\n        cleanupUserCookiesFile(userId);\n    }\n}\nasync function downloadVideo(url, outputPath, userId) {\n    const ytDlp = await findYtDlp();\n    const cookiesPath = await createUserCookiesFile(userId);\n    if (!cookiesPath) {\n        throw new Error(\"YouTube cookies not configured. Please upload your YouTube cookies.\");\n    }\n    try {\n        const strategies = [\n            {\n                client: \"ios\",\n                skipAvailabilityCheck: false\n            },\n            {\n                client: \"android\",\n                skipAvailabilityCheck: false\n            },\n            {\n                client: \"web\",\n                skipAvailabilityCheck: true\n            },\n            {\n                client: \"mweb\",\n                skipAvailabilityCheck: true\n            }\n        ];\n        let lastError = null;\n        for (const strategy of strategies){\n            try {\n                await new Promise((resolve, reject)=>{\n                    let errorOutput = \"\";\n                    let extractorArgs = `youtube:player_client=${strategy.client}`;\n                    if (strategy.skipAvailabilityCheck) {\n                        extractorArgs += `;skip=authcheck`;\n                    }\n                    const args = [\n                        \"-f\",\n                        \"bv*[height<=1080][fps<=60][vcodec~='(avc1|h264)']+ba[acodec~='(m4a|aac)']/b[ext=mp4]\",\n                        \"--merge-output-format\",\n                        \"mp4\",\n                        \"--force-ipv4\",\n                        \"--sleep-requests\",\n                        \"1\",\n                        \"--min-sleep-interval\",\n                        \"1\",\n                        \"--max-sleep-interval\",\n                        \"5\",\n                        \"--extractor-args\",\n                        extractorArgs,\n                        \"--cookies\",\n                        cookiesPath,\n                        \"-o\",\n                        outputPath,\n                        url\n                    ];\n                    const process1 = (0,child_process__WEBPACK_IMPORTED_MODULE_0__.spawn)(ytDlp, args);\n                    process1.stderr.on(\"data\", (data)=>{\n                        errorOutput += data.toString();\n                    });\n                    process1.stdout.on(\"data\", (data)=>{\n                        console.log(data.toString());\n                    });\n                    process1.on(\"close\", (code)=>{\n                        if (code === 0) {\n                            resolve();\n                        } else {\n                            reject(new Error(`yt-dlp exited with code ${code}: ${errorOutput}`));\n                        }\n                    });\n                    process1.on(\"error\", reject);\n                });\n                return;\n            } catch (error) {\n                lastError = error;\n                console.log(`Failed with client ${strategy.client}, trying next...`);\n                continue;\n            }\n        }\n        throw lastError || new Error(\"Failed to download video with all player clients\");\n    } finally{\n        cleanupUserCookiesFile(userId);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTLENBQUNFO3dCQUNuQixJQUFJQSxTQUFTLEdBQ2I7NEJBQ0VOO3dCQUNGLE9BRUE7NEJBQ0VDLE9BQU8sSUFBSWQsTUFBTSxDQUFDLHdCQUF3QixFQUFFbUIsS0FBSyxFQUFFLEVBQUVTLFlBQVksQ0FBQzt3QkFDcEU7b0JBQ0Y7b0JBRUEvQixTQUFRb0IsRUFBRSxDQUFDLFNBQVNIO2dCQUN0QjtnQkFFQTtZQUNGLEVBQ0EsT0FBT3BCLE9BQVk7Z0JBQ2pCYSxZQUFZYjtnQkFDWkMsUUFBUWtDLEdBQUcsQ0FBQyxDQUFDLG1CQUFtQixFQUFFckIsU0FBU0gsTUFBTSxDQUFDLGdCQUFnQixDQUFDO2dCQUNuRTtZQUNGO1FBQ0Y7UUFFQSxNQUFNRSxhQUFhLElBQUlQLE1BQU07SUFDL0IsU0FDUTtRQUNOUCx1QkFBdUJmO0lBQ3pCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95dC1zaG9ydHNtaXRoLy4vc3JjL3NlcnZpY2VzL3lvdXR1YmUudHM/MGI2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzcGF3biB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJ1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnXG5pbXBvcnQgeyBleGlzdHNTeW5jLCB3cml0ZUZpbGVTeW5jLCBta2RpclN5bmMsIGNobW9kU3luYywgdW5saW5rU3luYyB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnXG5pbXBvcnQgeyB0bXBkaXIgfSBmcm9tICdvcydcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0Avc3JjL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyBkZWNyeXB0IH0gZnJvbSAnQC9zcmMvbGliL2VuY3J5cHRpb24nXG5cbmNvbnN0IGV4ZWNQcm9taXNlID0gcHJvbWlzaWZ5KGV4ZWMpXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyQ29va2llc0ZpbGUodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICBzZWxlY3Q6IHsgeW91dHViZUNvb2tpZXM6IHRydWUgfVxuICB9KVxuICBcbiAgaWYgKCF1c2VyIHx8ICF1c2VyLnlvdXR1YmVDb29raWVzKVxuICB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgY29uc3QgY29va2llc0RpciA9IGpvaW4odG1wZGlyKCksICd5dC1jb29raWVzJylcbiAgXG4gIGlmICghZXhpc3RzU3luYyhjb29raWVzRGlyKSlcbiAge1xuICAgIG1rZGlyU3luYyhjb29raWVzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICB9XG4gIFxuICBjb25zdCBjb29raWVzUGF0aCA9IGpvaW4oY29va2llc0RpciwgYCR7dXNlcklkfS50eHRgKVxuICBjb25zdCBkZWNyeXB0ZWRDb29raWVzID0gZGVjcnlwdCh1c2VyLnlvdXR1YmVDb29raWVzKVxuICBcbiAgd3JpdGVGaWxlU3luYyhjb29raWVzUGF0aCwgZGVjcnlwdGVkQ29va2llcylcbiAgY2htb2RTeW5jKGNvb2tpZXNQYXRoLCAwbzYwMClcbiAgXG4gIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgIGRhdGE6IHsgeW91dHViZUNvb2tpZXNMYXN0VXNlZEF0OiBuZXcgRGF0ZSgpIH1cbiAgfSlcbiAgXG4gIHJldHVybiBjb29raWVzUGF0aFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW51cFVzZXJDb29raWVzRmlsZSh1c2VySWQ6IHN0cmluZyk6IHZvaWQge1xuICBjb25zdCBjb29raWVzUGF0aCA9IGpvaW4odG1wZGlyKCksICd5dC1jb29raWVzJywgYCR7dXNlcklkfS50eHRgKVxuICBcbiAgdHJ5IHtcbiAgICBpZiAoZXhpc3RzU3luYyhjb29raWVzUGF0aCkpXG4gICAge1xuICAgICAgdW5saW5rU3luYyhjb29raWVzUGF0aClcbiAgICB9XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNsZWFudXAgY29va2llcyBmaWxlOicsIGVycm9yKVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZpbmRZdERscCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICBpZiAocHJvY2Vzcy5lbnYuWVRfRExQX1BBVEggJiYgZXhpc3RzU3luYyhwcm9jZXNzLmVudi5ZVF9ETFBfUEFUSCkpXG4gIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuWVRfRExQX1BBVEhcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBhd2FpdCBleGVjUHJvbWlzZSgnd2hpY2ggeXQtZGxwJylcbiAgICByZXR1cm4gJ3l0LWRscCdcbiAgfVxuICBjYXRjaCB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGV4ZWNQcm9taXNlKCd3aGljaCB5b3V0dWJlLWRsJylcbiAgICAgIHJldHVybiAneW91dHViZS1kbCdcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd5dC1kbHAgb3IgeW91dHViZS1kbCBub3QgZm91bmQgaW4gUEFUSCcpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9NZXRhZGF0YSB7XG4gIHRpdGxlOiBzdHJpbmdcbiAgZHVyYXRpb246IG51bWJlclxuICB1cmw6IHN0cmluZ1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW9NZXRhZGF0YSh1cmw6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFZpZGVvTWV0YWRhdGE+IHtcbiAgY29uc3QgeXREbHAgPSBhd2FpdCBmaW5kWXREbHAoKVxuICBjb25zdCBjb29raWVzUGF0aCA9IGF3YWl0IGNyZWF0ZVVzZXJDb29raWVzRmlsZSh1c2VySWQpXG4gIFxuICBpZiAoIWNvb2tpZXNQYXRoKVxuICB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdZb3VUdWJlIGNvb2tpZXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSB1cGxvYWQgeW91ciBZb3VUdWJlIGNvb2tpZXMuJylcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBzdHJhdGVnaWVzID0gW1xuICAgICAgeyBjbGllbnQ6ICdpb3MnLCBza2lwQXZhaWxhYmlsaXR5Q2hlY2s6IGZhbHNlIH0sXG4gICAgICB7IGNsaWVudDogJ2FuZHJvaWQnLCBza2lwQXZhaWxhYmlsaXR5Q2hlY2s6IGZhbHNlIH0sXG4gICAgICB7IGNsaWVudDogJ3dlYicsIHNraXBBdmFpbGFiaWxpdHlDaGVjazogdHJ1ZSB9LFxuICAgICAgeyBjbGllbnQ6ICdtd2ViJywgc2tpcEF2YWlsYWJpbGl0eUNoZWNrOiB0cnVlIH1cbiAgICBdXG4gICAgXG4gICAgbGV0IGxhc3RFcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIGZvciAoY29uc3Qgc3RyYXRlZ3kgb2Ygc3RyYXRlZ2llcylcbiAgICB7XG4gICAgICB0cnkge1xuICAgICAgICBsZXQgZXh0cmFjdG9yQXJncyA9IGB5b3V0dWJlOnBsYXllcl9jbGllbnQ9JHtzdHJhdGVneS5jbGllbnR9YFxuICAgICAgICBcbiAgICAgICAgaWYgKHN0cmF0ZWd5LnNraXBBdmFpbGFiaWxpdHlDaGVjaylcbiAgICAgICAge1xuICAgICAgICAgIGV4dHJhY3RvckFyZ3MgKz0gYDtza2lwPWF1dGhjaGVja2BcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAnLS1kdW1wLWpzb24nLFxuICAgICAgICAgICctLW5vLWRvd25sb2FkJyxcbiAgICAgICAgICAnLS1mb3JjZS1pcHY0JyxcbiAgICAgICAgICAnLS1zbGVlcC1yZXF1ZXN0cycsICcxJyxcbiAgICAgICAgICAnLS1leHRyYWN0b3ItYXJncycsIGV4dHJhY3RvckFyZ3MsXG4gICAgICAgICAgJy0tY29va2llcycsIGNvb2tpZXNQYXRoLFxuICAgICAgICAgIHVybFxuICAgICAgICBdXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBsZXQgc3Rkb3V0ID0gJydcbiAgICAgICAgICBsZXQgc3RkZXJyID0gJydcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBwcm9jZXNzID0gc3Bhd24oeXREbHAsIGFyZ3MpXG4gICAgICAgICAgXG4gICAgICAgICAgcHJvY2Vzcy5zdGRvdXQub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgc3Rkb3V0ICs9IGRhdGEudG9TdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgcHJvY2Vzcy5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgc3RkZXJyICs9IGRhdGEudG9TdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgcHJvY2Vzcy5vbignY2xvc2UnLCAoY29kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvZGUgPT09IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJlc29sdmUoc3Rkb3V0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGB5dC1kbHAgZXhpdGVkIHdpdGggY29kZSAke2NvZGV9OiAke3N0ZGVycn1gKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIHByb2Nlc3Mub24oJ2Vycm9yJywgcmVqZWN0KVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocmVzdWx0KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBkdXJhdGlvbjogTWF0aC5mbG9vcihkYXRhLmR1cmF0aW9uKSxcbiAgICAgICAgICB1cmw6IGRhdGEudXJsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIGxhc3RFcnJvciA9IGVycm9yXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRocm93IGxhc3RFcnJvciB8fCBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCB2aWRlbyBtZXRhZGF0YScpXG4gIH1cbiAgZmluYWxseSB7XG4gICAgY2xlYW51cFVzZXJDb29raWVzRmlsZSh1c2VySWQpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkVmlkZW8odXJsOiBzdHJpbmcsIG91dHB1dFBhdGg6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeXREbHAgPSBhd2FpdCBmaW5kWXREbHAoKVxuICBjb25zdCBjb29raWVzUGF0aCA9IGF3YWl0IGNyZWF0ZVVzZXJDb29raWVzRmlsZSh1c2VySWQpXG4gIFxuICBpZiAoIWNvb2tpZXNQYXRoKVxuICB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdZb3VUdWJlIGNvb2tpZXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSB1cGxvYWQgeW91ciBZb3VUdWJlIGNvb2tpZXMuJylcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBzdHJhdGVnaWVzID0gW1xuICAgICAgeyBjbGllbnQ6ICdpb3MnLCBza2lwQXZhaWxhYmlsaXR5Q2hlY2s6IGZhbHNlIH0sXG4gICAgICB7IGNsaWVudDogJ2FuZHJvaWQnLCBza2lwQXZhaWxhYmlsaXR5Q2hlY2s6IGZhbHNlIH0sXG4gICAgICB7IGNsaWVudDogJ3dlYicsIHNraXBBdmFpbGFiaWxpdHlDaGVjazogdHJ1ZSB9LFxuICAgICAgeyBjbGllbnQ6ICdtd2ViJywgc2tpcEF2YWlsYWJpbGl0eUNoZWNrOiB0cnVlIH1cbiAgICBdXG4gICAgXG4gICAgbGV0IGxhc3RFcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIGZvciAoY29uc3Qgc3RyYXRlZ3kgb2Ygc3RyYXRlZ2llcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGxldCBlcnJvck91dHB1dCA9ICcnXG4gICAgICAgICAgXG4gICAgICAgICAgbGV0IGV4dHJhY3RvckFyZ3MgPSBgeW91dHViZTpwbGF5ZXJfY2xpZW50PSR7c3RyYXRlZ3kuY2xpZW50fWBcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc3RyYXRlZ3kuc2tpcEF2YWlsYWJpbGl0eUNoZWNrKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGV4dHJhY3RvckFyZ3MgKz0gYDtza2lwPWF1dGhjaGVja2BcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgICctZicsIFwiYnYqW2hlaWdodDw9MTA4MF1bZnBzPD02MF1bdmNvZGVjfj0nKGF2YzF8aDI2NCknXStiYVthY29kZWN+PScobTRhfGFhYyknXS9iW2V4dD1tcDRdXCIsXG4gICAgICAgICAgICAnLS1tZXJnZS1vdXRwdXQtZm9ybWF0JywgJ21wNCcsXG4gICAgICAgICAgICAnLS1mb3JjZS1pcHY0JyxcbiAgICAgICAgICAgICctLXNsZWVwLXJlcXVlc3RzJywgJzEnLFxuICAgICAgICAgICAgJy0tbWluLXNsZWVwLWludGVydmFsJywgJzEnLFxuICAgICAgICAgICAgJy0tbWF4LXNsZWVwLWludGVydmFsJywgJzUnLFxuICAgICAgICAgICAgJy0tZXh0cmFjdG9yLWFyZ3MnLCBleHRyYWN0b3JBcmdzLFxuICAgICAgICAgICAgJy0tY29va2llcycsIGNvb2tpZXNQYXRoLFxuICAgICAgICAgICAgJy1vJywgb3V0cHV0UGF0aCxcbiAgICAgICAgICAgIHVybFxuICAgICAgICAgIF1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBwcm9jZXNzID0gc3Bhd24oeXREbHAsIGFyZ3MpXG4gICAgICAgICAgXG4gICAgICAgICAgcHJvY2Vzcy5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgZXJyb3JPdXRwdXQgKz0gZGF0YS50b1N0cmluZygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBwcm9jZXNzLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLnRvU3RyaW5nKCkpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBwcm9jZXNzLm9uKCdjbG9zZScsIChjb2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29kZSA9PT0gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYHl0LWRscCBleGl0ZWQgd2l0aCBjb2RlICR7Y29kZX06ICR7ZXJyb3JPdXRwdXR9YCkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBwcm9jZXNzLm9uKCdlcnJvcicsIHJlamVjdClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgbGFzdEVycm9yID0gZXJyb3JcbiAgICAgICAgY29uc29sZS5sb2coYEZhaWxlZCB3aXRoIGNsaWVudCAke3N0cmF0ZWd5LmNsaWVudH0sIHRyeWluZyBuZXh0Li4uYClcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhyb3cgbGFzdEVycm9yIHx8IG5ldyBFcnJvcignRmFpbGVkIHRvIGRvd25sb2FkIHZpZGVvIHdpdGggYWxsIHBsYXllciBjbGllbnRzJylcbiAgfVxuICBmaW5hbGx5IHtcbiAgICBjbGVhbnVwVXNlckNvb2tpZXNGaWxlKHVzZXJJZClcbiAgfVxufVxuIl0sIm5hbWVzIjpbInNwYXduIiwicHJvbWlzaWZ5IiwiZXhlYyIsImV4aXN0c1N5bmMiLCJ3cml0ZUZpbGVTeW5jIiwibWtkaXJTeW5jIiwiY2htb2RTeW5jIiwidW5saW5rU3luYyIsImpvaW4iLCJ0bXBkaXIiLCJwcmlzbWEiLCJkZWNyeXB0IiwiZXhlY1Byb21pc2UiLCJjcmVhdGVVc2VyQ29va2llc0ZpbGUiLCJ1c2VySWQiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJzZWxlY3QiLCJ5b3V0dWJlQ29va2llcyIsImNvb2tpZXNEaXIiLCJyZWN1cnNpdmUiLCJjb29raWVzUGF0aCIsImRlY3J5cHRlZENvb2tpZXMiLCJ1cGRhdGUiLCJkYXRhIiwieW91dHViZUNvb2tpZXNMYXN0VXNlZEF0IiwiRGF0ZSIsImNsZWFudXBVc2VyQ29va2llc0ZpbGUiLCJlcnJvciIsImNvbnNvbGUiLCJmaW5kWXREbHAiLCJwcm9jZXNzIiwiZW52IiwiWVRfRExQX1BBVEgiLCJFcnJvciIsImdldFZpZGVvTWV0YWRhdGEiLCJ1cmwiLCJ5dERscCIsInN0cmF0ZWdpZXMiLCJjbGllbnQiLCJza2lwQXZhaWxhYmlsaXR5Q2hlY2siLCJsYXN0RXJyb3IiLCJzdHJhdGVneSIsImV4dHJhY3RvckFyZ3MiLCJhcmdzIiwicmVzdWx0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzdGRvdXQiLCJzdGRlcnIiLCJvbiIsInRvU3RyaW5nIiwiY29kZSIsIkpTT04iLCJwYXJzZSIsInRpdGxlIiwiZHVyYXRpb24iLCJNYXRoIiwiZmxvb3IiLCJkb3dubG9hZFZpZGVvIiwib3V0cHV0UGF0aCIsImVycm9yT3V0cHV0IiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/youtube.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/iron-session","vendor-chunks/iron-webcrypto","vendor-chunks/uncrypto","vendor-chunks/bullmq","vendor-chunks/semver","vendor-chunks/ioredis","vendor-chunks/uuid","vendor-chunks/msgpackr","vendor-chunks/cron-parser","vendor-chunks/debug","vendor-chunks/redis-errors","vendor-chunks/standard-as-callback","vendor-chunks/redis-parser","vendor-chunks/@ioredis","vendor-chunks/tslib","vendor-chunks/supports-color","vendor-chunks/node-abort-controller","vendor-chunks/ms","vendor-chunks/luxon","vendor-chunks/lodash.isarguments","vendor-chunks/lodash.defaults","vendor-chunks/has-flag","vendor-chunks/denque","vendor-chunks/cluster-key-slot"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubmit%2Froute&page=%2Fapi%2Fsubmit%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubmit%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();